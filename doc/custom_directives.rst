Custom directives
=================

The Xanadu theme includes a couple of custom ReST classes and directives.

Docstable
---------

The provided ReST class ``docstable`` provides a nicely formatted
table with a header row for use in the Sphinx documentation.

To use this theme, simply prepend ``.. rst-class:: docstable`` above
any valid restructured text table, like so:

.. code-block:: rest

    .. rst-class:: docstable

    +-------------+------------------------------------------------+---------------------------------+
    |             | .. centered::                                  | .. centered::                   |
    | Measurement |   Measurement operator                         |   Measurement values            |
    +=============+================================================+=================================+
    | Homodyne    | .. centered::                                  | .. centered::                   |
    |             |   :math:`\ket{\x_\phi}\bra{\x_\phi}`           |   :math:`q\in\mathbb{R}`        |
    +-------------+------------------------------------------------+---------------------------------+
    | Heterodyne  | .. centered::                                  | .. centered::                   |
    |             |   :math:`\frac{1}{\pi}\ket{\alpha}\bra{\alpha}`|   :math:`\alpha\in\mathbb{C}`   |
    +-------------+------------------------------------------------+---------------------------------+
    | PNR         | .. centered::                                  | .. centered::                   |
    |             |   :math:`\ketbra{n}{n}`                        |   :math:`n\in\mathbb{N},n\geq 0`|
    +-------------+------------------------------------------------+---------------------------------+

This will display as follows:


.. rst-class:: docstable

+-----------------+------------------------------------------------+---------------------------------+
|                 | .. centered::                                  | .. centered::                   |
|   Measurement   |   Measurement operator                         |   Measurement values            |
+=================+================================================+=================================+
| Homodyne        | .. centered::                                  | .. centered::                   |
|                 |   :math:`\ket{\x_\phi}\bra{\x_\phi}`           |   :math:`q\in\mathbb{R}`        |
+-----------------+------------------------------------------------+---------------------------------+
| Heterodyne      | .. centered::                                  | .. centered::                   |
|                 |   :math:`\frac{1}{\pi}\ket{\alpha}\bra{\alpha}`|   :math:`\alpha\in\mathbb{C}`   |
+-----------------+------------------------------------------------+---------------------------------+
| Photon counting | .. centered::                                  | .. centered::                   |
|                 |   :math:`\ketbra{n}{n}`                        |   :math:`n\in\mathbb{N},n\geq 0`|
+-----------------+------------------------------------------------+---------------------------------+

To customize the color of the ``docstable``, see :ref:`colors`.


.. _gallery_items:

Gallery items
-------------

If using `Sphinx gallery <https://sphinx-gallery.github.io/>`_ to autogenerate documentation
and Jupyter notebooks from Python scripts in your ``examples/`` folder,
you may use the following custom
gallery directives to create hyperlinked thumbnails:

.. code-block:: rest

    .. customgalleryitem::
        :tooltip: A tooltip that will display on hover
        :figure: ../examples/example_image.png
        :description: :ref:`example_gallery`

This renders as follows:

.. customgalleryitem::
    :tooltip: A tooltip that will display on hover
    :figure: ../examples/example_image.png
    :description: :ref:`example_gallery`

.. raw:: html

    <div style='clear:both'></div>


After a block of gallery items, you will need to include the following
to ensure a page break:

.. code-block:: rest


    .. raw:: html

        <div style='clear:both'></div>

You may also add your autogenerated gallery items to the
sidebar table of contents:

.. code-block:: rest

    .. toctree::
       :maxdepth: 1
       :caption: Gallery
       :hidden:

       gallery/example_gallery_item

where ``gallery`` is the path to the Sphinx gallery ``'gallery_dirs'``
configuration option.


To customize integration of Sphinx gallery with the theme, see :ref:`gallery_options`.



.. note::

    The ``xanadu_sphinx_theme.custom_directives`` module is a modified version
    of the module provided by https://github.com/pytorch/tutorials,
    which is released under the BSD3 license with the following copyright
    notice:

      Copyright (c) 2017, Pytorch contributors.
      All rights reserved.

